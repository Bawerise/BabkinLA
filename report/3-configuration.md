# 3) Конфигурирование сервера
##  1) Список параметров через запрос к представлению 'pg_settings' с условием context = 'postmaster'

В psql был выполнен запрос к представлению 'pg_settings':

```text
SELECT name, setting, context
FROM pg_settings
WHERE context = 'postmaster'
ORDER BY name;
```

Результат показывает параметры конфигурации, у которых context равен `postmaster`.

![](img/3.1.png) <br> Рисунок 3.1. Выполнение запроса к представлению 'pg_settings' и получение списка параметров конфигурации.

## 2) Ошибка в файле 'config/postgresql.conf'

В файле 'config/postgresql.conf' в блоке 'minimal baseline' допущена синтаксическая ошибка при изменении 'max_connections'.

![](img/3.2.png) <br> Рисунок 3.2. Синтаксическая ошибка в 'max_connections' в файле 'config/postgresql.conf'.
После изменения файла был выполнен перезапуск контейнера

```bash
docker compose restart db
docker compose ps db
```

![](img/3.3.png) <br> Рисунок 3.3. Перезапуск контейнера.

На скриншоте видно, что 'pg-primary' находится в состоянии 'Restarting', то есть сервер не может корректно запуститься из-за синтаксической ошибки в файле, допущенной раннее.


## 3) Логи сервера с синтаксической ошибкой в 'max_connections'

Были открыты логи сервиса db с помощью команды docker compose logs db.

По логам видно, что некорректное значение параметра 'max_connections' мешает запуску.

![](img/3.4.png) <br> Рисунок 3.4. Логи контейнера с ошибкой.
## 4) Исправление конфигурации и успешный запуск сервера

В 'config/postgresql.conf' в параметре 'max_connections' была исправлена синтакическая ошибка.

![](img/3.5.png) <br> Рисунок 3.5. Исправление синтаксической ошибки в параметре 'max_connections'.

После этого снова выполнен перезапуск сервиса db:

![](img/3.6.png) <br> Рисунок 3.6. Перезапуск сервиса db.

Теперь 'pg-primary' находятся в состоянии 'Up', что означает успешный запуск после исправления синтаксической ошибки.
